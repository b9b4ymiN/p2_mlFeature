# üß™ Test Scripts for Phase 2

## ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Test Scripts

### üìù ‡∏°‡∏µ 2 ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö:

1. **`test_mock_data.py`** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Phase 2 ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Phase 1
2. **`test_phase1_connection.py`** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Phase 1 Docker

---

## üü¢ Test 1: Mock Data (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Phase 1)

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ô:

```bash
cd p2_mlFeature
python test_mock_data.py
```

### ‡∏à‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏∞‡πÑ‡∏£:
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á (5,000 samples)
- ‚úÖ Feature Engineering (100+ features)
- ‚úÖ Target Engineering (classification)
- ‚úÖ Feature Selection (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å top 30)
- ‚úÖ Model Training (XGBoost - optional)

### Output ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á:

```
====================================================================
üß™ TEST PHASE 2 WITH MOCK DATA
====================================================================

============================================================
üìä ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á (Mock Data)
============================================================
‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á 5000 samples
   - OHLCV: 5000 rows
   - OI: 5000 rows
   - Funding: 5000 rows
   - Liquidations: 500 rows
   - L/S Ratio: 5000 rows

============================================================
üîß ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Feature Engineering
============================================================
Engineering OI features...
Engineering price features...
Engineering volume features...
‚úÖ Feature Engineering ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
   - Total columns: 156
   - Feature columns: 137
   - Rows: 5000

============================================================
üéØ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Target Engineering
============================================================
‚úÖ Target Engineering ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
   - Rows with target: 4952

üìä Target Distribution:
   SHORT     : 1234 ( 24.9%)
   NEUTRAL   : 2484 ( 50.2%)
   LONG      : 1234 ( 24.9%)

============================================================
üé® ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Feature Selection
============================================================
‚úÖ Feature Selection ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
   - ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ features: 30

üèÜ Top 10 Features:
    1. oi_price_divergence_48            0.0542
    2. oi_macd_histogram                 0.0487
    3. funding_zscore                    0.0431
    ...

====================================================================
‚úÖ PHASE 2 TEST COMPLETED SUCCESSFULLY!
====================================================================
```

**‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤:** 2-5 ‡∏ô‡∏≤‡∏ó‡∏µ

---

## üü° Test 2: Phase 1 Connection

### ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°:

#### 1. ‡πÄ‡∏õ‡∏¥‡∏î Phase 1 Docker

```bash
cd p1_dataCollection
docker-compose up -d
```

#### 2. ‡πÄ‡∏ä‡πá‡∏Ñ Password

```bash
cat docker-compose.yml | grep POSTGRES_PASSWORD
```

‡∏à‡∏∞‡πÑ‡∏î‡πâ:
```yaml
POSTGRES_PASSWORD: your_password  üëà ‡∏à‡∏î‡πÑ‡∏ß‡πâ!
```

#### 3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `test_phase1_connection.py`

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 15-20:

```python
DB_CONFIG = {
    'host': 'localhost',
    'port': 5432,
    'database': 'futures_db',
    'user': 'postgres',
    'password': 'your_password'  # üëà ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô password ‡∏à‡∏£‡∏¥‡∏á!
}

SYMBOL = 'BTCUSDT'  # ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏ß‡πâ
DAYS_BACK = 7       # ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ô:

```bash
cd p2_mlFeature
python test_phase1_connection.py
```

### ‡∏à‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏∞‡πÑ‡∏£:

- ‚úÖ **Test 1:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database ‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°
- ‚úÖ **Test 2:** ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OHLCV ‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°
- ‚úÖ **Test 3:** ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (OI, Funding, etc.)
- ‚úÖ **Test 4:** Feature Engineering ‡∏ö‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á
- ‚úÖ **Test 5:** Full Pipeline (Phase 1 ‚Üí 2)

### Output ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á:

```
====================================================================
üß™ TEST PHASE 1 CONNECTION
====================================================================

============================================================
üîå TEST 1: Database Connection
============================================================
‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...
   Host:     localhost
   Port:     5432
   Database: futures_db
   User:     postgres

‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!

============================================================
üìä TEST 2: Fetch OHLCV Data
============================================================
‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OHLCV...
   Symbol:     BTCUSDT
   Start Date: 2024-11-03
   End Date:   2024-11-10

‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OHLCV ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
   Rows: 2,016

============================================================
üì• TEST 3: Fetch All Data Types
============================================================
‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!

üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   OHLCV:        2,016 rows
   OI:           2,016 rows
   Funding:      2,016 rows
   Liquidations: 201 rows
   L/S Ratio:    2,016 rows

============================================================
üîß TEST 4: Feature Engineering on Real Data
============================================================
‚úÖ Feature Engineering ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
   Total features: 137
   Rows: 2,016

============================================================
üöÄ TEST 5: Full Pipeline (Phase 1 ‚Üí 2 ‚Üí 3)
============================================================
‡∏£‡∏±‡∏ô Full Pipeline? (y/n): y

[Step 1/3] Feature Engineering...
‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á 137 features

[Step 2/3] Target Engineering...
‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á target (1968 samples)

üìä Target Distribution:
   SHORT     :   492 ( 25.0%)
   NEUTRAL   :   984 ( 50.0%)
   LONG      :   492 ( 25.0%)

[Step 3/3] Feature Selection...
‡∏ó‡∏≥ Feature Selection ‡πÑ‡∏´‡∏°? (y/n): y
‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 30 features ‡πÅ‡∏•‡πâ‡∏ß

üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà: phase1_to_phase2_output.parquet

====================================================================
‚úÖ PHASE 1 CONNECTION TEST COMPLETED!
====================================================================
```

**‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤:** 1-3 ‡∏ô‡∏≤‡∏ó‡∏µ

---

## üîß ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 1: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

```
‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß!
   Error: could not connect to server: Connection refused
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**

```bash
# ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ Docker ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°
docker ps

# ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô container ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà
cd p1_dataCollection
docker-compose up -d

# ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö
docker ps
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 2: Password ‡∏ú‡∏¥‡∏î

```
‚ùå password authentication failed for user "postgres"
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**

```bash
# ‡∏î‡∏π password ‡∏à‡∏£‡∏¥‡∏á‡πÜ
cd p1_dataCollection
cat docker-compose.yml | grep POSTGRES_PASSWORD

# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô test_phase1_connection.py
# ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 20: 'password': 'password_‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å'
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 3: ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```
‚ö†Ô∏è  ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Database
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**

```bash
# ‡∏£‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Phase 1 ‡∏Å‡πà‡∏≠‡∏ô
cd p1_dataCollection
python scripts/main_historical_collection.py
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 4: Import Error

```
ModuleNotFoundError: No module named 'xgboost'
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**

```bash
# Install dependencies
cd p2_mlFeature
pip install -r requirements.txt
```

---

## üìä ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö 2 Tests

| Feature | Mock Data | Phase 1 Connection |
|---------|-----------|-------------------|
| ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Phase 1 | ‚ùå | ‚úÖ |
| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á | ‚ùå | ‚úÖ |
| ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ | 2-5 ‡∏ô‡∏≤‡∏ó‡∏µ | 1-3 ‡∏ô‡∏≤‡∏ó‡∏µ |
| ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö | ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Phase 2 | ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Integration |

---

## üéØ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Phase 2 ‡∏Å‡πà‡∏≠‡∏ô (Mock Data)

```bash
python test_mock_data.py
```

**‡∏ó‡∏≥‡πÑ‡∏°:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Phase 2 ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Phase 1

```bash
python test_phase1_connection.py
```

**‡∏ó‡∏≥‡πÑ‡∏°:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πà‡∏≠ Database ‡πÑ‡∏î‡πâ

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏£‡∏±‡∏ô Full Pipeline

```bash
python run_full_pipeline.py --db-password your_password
```

**‡∏ó‡∏≥‡πÑ‡∏°:** ‡∏£‡∏±‡∏ô Phase 1 ‚Üí 2 ‚Üí 3 ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

---

## üìù Notes

- **Mock Data**: ‡∏î‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ code ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
- **Phase 1 Connection**: ‡∏î‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ integrate ‡∏à‡∏£‡∏¥‡∏á
- **Full Pipeline**: ‡∏î‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö train model ‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á

---

## üöÄ Quick Start

```bash
# 1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Phase 1)
python test_mock_data.py

# 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö Phase 1 (‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ password ‡∏Å‡πà‡∏≠‡∏ô!)
python test_phase1_connection.py

# 3. ‡∏£‡∏±‡∏ô Pipeline ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
python run_full_pipeline.py --db-password your_password
```

**Happy Testing! üéâ**
